<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Riders for Health trip tracker</title>
</head>
<body>
    <h1>Riders for Health trip tracker</h1>
    <form>
        <dl>
            <dt>Trip Name</dt>
                <dd><input type="text" placeholder="Weekly Outreach"></dd>
            <dt>Trip Note</dt>
                <dd><textarea placeholder="Check up on children's clinic"></textarea></dd>
            <dt>From</dt>
                <dd>
                    <select>
                        <option selected>Maseru</option>
                        <option>Ratau</option>
                    </select>
                </dd>
            <dt>To</dt>
                <dd>
                    <select>
                        <option>Maseru</option>
                        <option selected>Ratau</option>
                    </select>
                </dd>
            <dt>Vehicle</dt>
                <dd>
                    <select>
                        <option>Honda 125</option>
                        <option selected>Honda 250</option>
                    </select>
                </dd>
            <dt>Fuel level</dt>
                <dd>
                    <select>
                        <option selected>Full</option>
                        <option>&frac34; Full</option>
                        <option>&frac12; Full</option>
                        <option>&frac14; Full</option>
                        <option>Empty</option>
                    </select>
                </dd>
        </dl>
        <button type="button">Start Trip!</button>
        <h2>Remember to start your camera!</h2>
    </form>

<!--
    <input type="file" accept="image/*" capture="camera">
 -->
    <script>
        (function (window, document) {
            'use strict';

            var INTERVAL = 1e3;
            var bttn = document.getElementsByTagName('button')[0];

            // TODO: bail out if no local storage or geolocation

            var getLocation = function () {
                navigator.geolocation.getCurrentPosition(storeCoords, fail);
            }

            var storeCoords = function ( geoposition ) {
                localStorage.setItem(geoposition.timestamp, JSON.stringify(geoposition.coords));
            }

            var publish = function () {

            }

            var fail = function () {
//                  TODO
            }

            var initTrip = function () {
                window.setInterval(getLocation, INTERVAL);
            }

            bttn.addEventListener('click', initTrip, false);

// clear            for(key in localStorage) { localStorage.removeItem(key); }
        })(window, document);
    </script>
</body>
</html>
